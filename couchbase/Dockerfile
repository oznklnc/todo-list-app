FROM couchbase

# Declare build arguments
ARG COUCHBASE_ADMINISTRATOR_USERNAME
ARG COUCHBASE_ADMINISTRATOR_PASSWORD
ARG COUCHBASE_BUCKET
ARG COUCHBASE_BUCKET_PASSWORD

# Set environment variables using the build arguments
ENV COUCHBASE_ADMINISTRATOR_USERNAME=${COUCHBASE_ADMINISTRATOR_USERNAME}
ENV COUCHBASE_ADMINISTRATOR_PASSWORD=${COUCHBASE_ADMINISTRATOR_PASSWORD}
ENV COUCHBASE_BUCKET=${COUCHBASE_BUCKET}
ENV COUCHBASE_BUCKET_PASSWORD=${COUCHBASE_BUCKET_PASSWORD}

COPY configure.sh /opt/couchbase

RUN chmod +x /opt/couchbase/configure.sh

CMD ["/opt/couchbase/configure.sh"]